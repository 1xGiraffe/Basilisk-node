<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Liquidity mining pallet"><meta name="keywords" content="rust, rustlang, rust-lang, pallet_liquidity_mining"><title>pallet_liquidity_mining - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-e963ab4a0d0c903e.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-046227e470cd3629.css"><link rel="stylesheet" disabled href="../static.files/dark-800f2ee593c8e6f7.css"><link rel="stylesheet" disabled href="../static.files/ayu-9edae3c387f5a5b3.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-287cecec4dbb45b0.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../pallet_liquidity_mining/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../pallet_liquidity_mining/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate pallet_liquidity_mining</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 4.1.3</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#types">Type Definitions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Crate <a class="mod" href="#">pallet_liquidity_mining</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/pallet_liquidity_mining/lib.rs.html#29-1906">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="liquidity-mining-pallet"><a href="#liquidity-mining-pallet">Liquidity mining pallet</a></h2><h3 id="overview"><a href="#overview">Overview</a></h3>
<p>This pallet provides functionality for a liquidity mining program with a time incentive (loyalty
factor) and multiple incentives scheme.
Users are rewarded for each period they stay in the liq. mining program.</p>
<p>Reward per one period is derived from the user’s loyalty factor which grows with time (periods)
the user is in the liq. mining program and the amount of LP shares the user locked into deposit.
User’s loyalty factor is reset if the user exits and reenters liquidity mining.
User can claim rewards without resetting loyalty factor, only withdrawing shares
is penalized by loyalty factor reset.
The user is rewarded from the next period after they enters.</p>
<p>Multiple Incentives</p>
<p>This feature allows users to redeposit already deposited LP shares to multiple yield farms and
receive incentives from these farms.
Deposit in yield farm is called “farm entry”.
Maximal number of redepositing same LP shares is configured by variable: <code>MaxFarmEntriesPerDeposit</code>.
Set <code>MaxFarmEntriesPerDeposit</code> to <code>1</code> to disable multiple incentives scheme. !!!NEVER set this
variable to <code>0</code>.
LP shares can be redeposited only to different yield farms running liquidity mining for same
pair of assets.</p>
<p>Notes:</p>
<ul>
<li>LP shares are returned ONLY if deposit is destroyed - withdrawing LP shares can
be used to “free slot” for re-lock LP shares to different yield farm. Withdrawing LP shares result in
resetting loyalty factor for yield farm user is withdrawing from(other farm entries in the
deposit are not affected). If deposit has no more farm entries, deposit is destroyed and LP
shares are returned back to user.</li>
<li><code>YieldFarm</code> -  can be in the 3 states: [<code>Active</code>, <code>Stopped</code>, <code>Terminated</code>]
<ul>
<li><code>Active</code> - liquidity mining is running, users are able to deposit, claim and withdraw LP
shares. <code>YieldFarm</code> is rewarded from <code>GlobalFarm</code> in this state.</li>
<li><code>Stopped</code> - liquidity mining is stopped. Users can claim and withdraw LP shares from the
farm. Users CAN’T deposit new LP shares to stopped farm. Stopped farm is not rewarded from the
<code>GlobalFarm</code>.
Note: stopped farm can be resumed or destroyed.</li>
<li><code>Terminated</code> - liquidity mining is ended. User’s CAN’T deposit or claim rewards from
stopped farm. Users CAN only withdraw LP shares(without rewards).
<code>YieldFarm</code> must be stopped before it can be terminated. Terminated farm stays in the storage
until last farm’s entry is withdrawn. Last withdrawn from yield farm will remove terminated
farm from the storage.
Note: Terminated farm CAN’T be resumed.</li>
</ul>
</li>
<li><code>GlobalFarm</code> - can be in the 2 states: [<code>Active</code>, <code>Terminated</code>]
<ul>
<li><code>Active</code> - liquidity mining program is running, new yield farms can be added to the
global farm.</li>
<li><code>Terminated</code> - liquidity mining program is ended. Yield farms can’t be added to the global
farm. Global farm MUST be empty(all yield farms in the global farm must be destroyed)
before it can be destroyed. Destroying global farm transfer undistributed rewards to farm’s
owner. Terminated global farm stay in the storage until all yield farms are removed from
the storage. Last yield farm removal from storage triggers global farm removal from
storage.
Note: Terminated global farm CAN’T be resumed.</li>
</ul>
</li>
<li>Pot - account holding all rewards allocated for all <code>YieldFarm</code>s from all <code>GlobalFarm</code>s.
User’s rewards are transferred from <code>pot</code>’s account to user’s accounts.</li>
</ul>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2><div class="item-table"><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="pallet/index.html" title="mod pallet_liquidity_mining::pallet">pallet</a>::*;</code></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="pallet/index.html" title="pallet_liquidity_mining::pallet mod">pallet</a></div><div class="item-right docblock-short">The module that hosts all the
<a href="https://docs.substrate.io/main-docs/build/events-errors/">FRAME</a>
types needed to add this pallet to a
runtime.</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DefaultPriceAdjustment.html" title="pallet_liquidity_mining::DefaultPriceAdjustment struct">DefaultPriceAdjustment</a></div><div class="item-right docblock-short">Default implementation of <code>PriceAdjustment</code> trait which returns <code>price_adjustment</code> value saved
in <code>GlobalFarm</code>.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.DepositData.html" title="pallet_liquidity_mining::DepositData struct">DepositData</a></div><div class="item-right docblock-short">Deposit represents a group of locked LP shares in the liquidity mining program(“Position”).
LP shares in the deposit can be locked in one or more yield farms based on pallet’s
configuration(<code>MaxEntriesPerDeposit</code>).
The LP token’s lock in the deposit is called “farm entry”. Farm entry entitles deposit
owner to accumulate rewards from the yield farm.
Every deposit should have at least one farm entry and deposit without farm entries
should be removed from storage and LP shares should be unlocked.
<code>redeposit_lp_shares()</code> is used to add a new farm entry into the deposit(“re-lock” LP shares“).</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.GlobalFarmData.html" title="pallet_liquidity_mining::GlobalFarmData struct">GlobalFarmData</a></div><div class="item-right docblock-short">This struct represents the state a of single liquidity mining program. <code>YieldFarm</code>s are rewarded from
<code>GlobalFarm</code> based on their stake in <code>GlobalFarm</code>. <code>YieldFarm</code> stake in <code>GlobalFarm</code> is derived from
users stake in <code>YieldFarm</code>.
Yield farm is considered live from global farm view if yield farm is <code>active</code> or <code>stopped</code>.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.LoyaltyCurve.html" title="pallet_liquidity_mining::LoyaltyCurve struct">LoyaltyCurve</a></div><div class="item-right docblock-short">Loyalty curve to calculate loyalty multiplier.</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.YieldFarmData.html" title="pallet_liquidity_mining::YieldFarmData struct">YieldFarmData</a></div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.YieldFarmEntry.html" title="pallet_liquidity_mining::YieldFarmEntry struct">YieldFarmEntry</a></div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.FarmState.html" title="pallet_liquidity_mining::FarmState enum">FarmState</a></div><div class="item-right docblock-short">An enum whose variants represent the state of the yield or global farm.</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.Balance.html" title="pallet_liquidity_mining::Balance type">Balance</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.DepositId.html" title="pallet_liquidity_mining::DepositId type">DepositId</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.FarmId.html" title="pallet_liquidity_mining::FarmId type">FarmId</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.FarmMultiplier.html" title="pallet_liquidity_mining::FarmMultiplier type">FarmMultiplier</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.GlobalFarmId.html" title="pallet_liquidity_mining::GlobalFarmId type">GlobalFarmId</a></div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.YieldFarmId.html" title="pallet_liquidity_mining::YieldFarmId type">YieldFarmId</a></div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="pallet_liquidity_mining" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.0-nightly (234151769 2022-12-03)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>